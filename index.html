<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Casino Simulator Mejorado</title>
  <style>
    /* Reset bÃ¡sico */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      user-select: none;
    }

    body {
      background: radial-gradient(circle at center, #1a1a1a, #000000);
      color: #f0d76a;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      width: 100%;
      background: #3a1f00;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 0 15px #f0d76a;
    }

    header h1 {
      font-size: 2.5rem;
      text-shadow: 0 0 10px #f0d76a;
    }

    nav {
      margin-top: 1rem;
    }

    .nav-btn {
      background: #5a3300;
      border: none;
      color: #f0d76a;
      padding: 0.6rem 1.2rem;
      margin: 0 0.5rem;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
      box-shadow: 0 0 8px #d4b94f;
      transition: background 0.3s ease;
    }

    .nav-btn:hover,
    .nav-btn.active {
      background: #f0d76a;
      color: #3a1f00;
      box-shadow: 0 0 15px #f0d76a;
    }

    main {
      margin: 2rem auto;
      width: 90%;
      max-width: 650px;
      background: #2c1b00;
      border-radius: 15px;
      padding: 2rem;
      box-shadow: 0 0 20px #f0d76a;
      min-height: 450px;
      color: #fffbe0;
    }

    .game-section {
      display: none;
    }

    .game-section.active {
      display: block;
    }

    h2 {
      text-align: center;
      margin-bottom: 1rem;
      text-shadow: 0 0 8px #f0d76a;
    }

    .roulette-container {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }

    .spin-btn {
      display: block;
      margin: 0 auto 1rem auto;
      padding: 0.8rem 1.5rem;
      font-size: 1.1rem;
      background: #f0d76a;
      border: none;
      border-radius: 8px;
      color: #3a1f00;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 15px #f0d76a;
      transition: background 0.3s ease;
    }

    .spin-btn:hover {
      background: #d4b94f;
    }

    button {
      cursor: pointer;
    }

    /* Juego de cartas */
    #cards-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 1rem 0;
    }
    .card {
      width: 80px;
      height: 120px;
      background: #5a3300;
      border-radius: 10px;
      box-shadow: inset 0 0 10px #d4b94f;
      color: #f0d76a;
      font-weight: bold;
      font-size: 2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s ease;
    }
    .card:hover {
      background: #f0d76a;
      color: #3a1f00;
      box-shadow: 0 0 15px #f0d76a;
    }
    .card.selected {
      background: #d4b94f;
      color: #3a1f00;
      box-shadow: 0 0 20px #f0d76a;
      cursor: default;
    }

    /* Minas */
    #mines-grid {
      display: grid;
      grid-template-columns: repeat(8, 45px);
      grid-gap: 8px;
      justify-content: center;
      margin: 1rem 0;
    }

    .mine-cell {
      width: 45px;
      height: 45px;
      background: #5a3300;
      border-radius: 8px;
      box-shadow: inset 0 0 8px #d4b94f;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 1.1rem;
      color: transparent;
      user-select: none;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .mine-cell.revealed {
      background: #f0d76a;
      color: #3a1f00;
      cursor: default;
      box-shadow: 0 0 10px #f0d76a;
    }

    .mine-cell.mine {
      background: #a83232;
      color: #fff;
      box-shadow: 0 0 15px #ff4c4c;
    }

    #mines-message {
      text-align: center;
      font-weight: bold;
      margin-top: 0.5rem;
      min-height: 1.5rem;
    }

    footer {
      margin-top: auto;
      padding: 1rem;
      width: 100%;
      text-align: center;
      background: #3a1f00;
      color: #f0d76a;
      box-shadow: 0 0 15px #f0d76a;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>ðŸŽ° Casino Simulator Mejorado ðŸŽ²</h1>
    <nav>
      <button id="btn-roulette" class="nav-btn active">Ruleta</button>
      <button id="btn-cards" class="nav-btn">Juego de Cartas</button>
      <button id="btn-mines" class="nav-btn">Minas</button>
    </nav>
  </header>

  <main>
    <!-- Ruleta -->
    <section id="roulette-section" class="game-section active">
      <h2>Ruleta (70% perder, 30% ganar)</h2>
      <div class="roulette-container">
        <canvas id="roulette-canvas" width="300" height="300"></canvas>
      </div>
      <button id="spin-btn" class="spin-btn">Girar Ruleta</button>
      <p id="roulette-result"></p>
    </section>

    <!-- Juego de cartas -->
    <section id="cards-section" class="game-section">
      <h2>Juego de Cartas - Adivina la carta</h2>
      <p>Elige una carta entre 4. Si aciertas, ganas.</p>
      <div id="cards-container">
        <div class="card" data-card="A">A</div>
        <div class="card" data-card="K">K</div>
        <div class="card" data-card="Q">Q</div>
        <div class="card" data-card="J">J</div>
      </div>
      <p id="cards-result"></p>
      <button id="cards-reset-btn" style="display:none; margin: 1rem auto; padding: 0.5rem 1rem; background:#f0d76a; border:none; border-radius:6px; font-weight:bold; color:#3a1f00; cursor:pointer;">Jugar de nuevo</button>
    </section>

    <!-- Juego de Minas -->
    <section id="mines-section" class="game-section">
      <h2>Juego de Minas (8x8, 2 minas)</h2>
      <p>Evita las minas y gana puntos.</p>
      <div id="mines-grid"></div>
      <p id="mines-message"></p>
      <button id="mines-reset-btn" class="spin-btn" style="margin-top: 1rem;">Reiniciar Juego</button>
    </section>
  </main>

  <footer>
    <p>Proyecto personal - Casino Simulator &copy; 2025</p>
  </footer>

  <script>
    // NavegaciÃ³n entre juegos
    const btnRoulette = document.getElementById('btn-roulette');
    const btnCards = document.getElementById('btn-cards');
    const btnMines = document.getElementById('btn-mines');

    const sectionRoulette = document.getElementById('roulette-section');
    const sectionCards = document.getElementById('cards-section');
    const sectionMines = document.getElementById('mines-section');

    const navButtons = [btnRoulette, btnCards, btnMines];
    const sections = [sectionRoulette, sectionCards, sectionMines];

    function activateSection(index) {
      sections.forEach((sec, i) => {
        sec.classList.toggle('active', i === index);
        navButtons[i].classList.toggle('active', i === index);
      });
    }

    btnRoulette.addEventListener('click', () => activateSection(0));
    btnCards.addEventListener('click', () => activateSection(1));
    btnMines.addEventListener('click', () => activateSection(2));
  </script>

  <script>
    // Ruleta con 70% perder, 30% ganar
    const canvas = document.getElementById('roulette-canvas');
    const ctx = canvas.getContext('2d');
    const spinBtn = document.getElementById('spin-btn');
    const resultText = document.getElementById('roulette-result');

    // Se agregan segmentos de "perder" y "ganar" para simular probabilidades
    // 70% perder: 7 segmentos "Perder"
    // 30% ganar: 3 segmentos con multiplicadores
    const segments = [
      { color: '#a83232', label: 'Perder', multiplier: 0 },
      { color: '#a83232', label: 'Perder', multiplier: 0 },
      { color: '#a83232', label: 'Perder', multiplier: 0 },
      { color: '#a83232', label: 'Perder', multiplier: 0 },
      { color: '#a83232', label: 'Perder', multiplier: 0 },
      { color: '#a83232', label: 'Perder', multiplier: 0 },
      { color: '#a83232', label: 'Perder', multiplier: 0 },
      { color: '#f0d76a', label: 'x2', multiplier: 2 },
      { color: '#d4b94f', label: 'x3', multiplier: 3 },
      { color: '#bfa134', label: 'x5', multiplier: 5 },
    ];

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 140;

    let startAngle = 0;
    let spinTimeout = null;
    let spinAngleStart = 0;
    let spinTime = 0;
    let spinTimeTotal = 0;

    function drawSegment(index, startAngle, arc) {
      const segment = segments[index];
      ctx.beginPath();
      ctx.fillStyle = segment.color;
      ctx.moveTo(centerX, centerY);
      ctx.arc(centerX, centerY, radius, startAngle, startAngle + arc, false);
      ctx.lineTo(centerX, centerY);
      ctx.fill();

      // Texto
      ctx.save();
      ctx.fillStyle = segment.multiplier === 0 ? '#fff' : '#3a1f00';
      ctx.font = 'bold 18px Arial';
      ctx.translate(centerX, centerY);
      ctx.rotate(startAngle + arc / 2);
      ctx.textAlign = 'right';
      ctx.fillText(segment.label, radius - 10, 10);
      ctx.restore();
    }

    function drawRoulette() {
      const arc = (2 * Math.PI) / segments.length;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (let i = 0; i < segments.length; i++) {
        drawSegment(i, startAngle + i * arc, arc);
      }

      // Dibuja la flecha
      ctx.fillStyle = '#ff0000';
      ctx.beginPath();
      ctx.moveTo(centerX - 10, centerY - radius - 10);
      ctx.lineTo(centerX + 10, centerY - radius - 10);
      ctx.lineTo(centerX, centerY - radius + 10);
      ctx.closePath();
      ctx.fill();
    }

    function spin() {
      spinAngleStart = Math.random() * 10 + 10;
      spinTime = 0;
      spinTimeTotal = Math.random() * 3000 + 4000;
      rotateWheel();
    }

    function rotateWheel() {
      spinTime += 30;
      if (spinTime >= spinTimeTotal) {
        stopRotateWheel();
        return;
      }
      const spinAngle =
        spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
      startAngle += (spinAngle * Math.PI) / 180;
      drawRoulette();
      spinTimeout = setTimeout(rotateWheel, 30);
    }

    function stopRotateWheel() {
      clearTimeout(spinTimeout);
      const arc = (2 * Math.PI) / segments.length;
      const degrees = (startAngle * 180) / Math.PI + 90;
      const index =
        Math.floor(
          segments.length -
            ((degrees / (360 / segments.length)) % segments.length)
        ) % segments.length;
      const segment = segments[index];
      if (segment.multiplier === 0) {
        resultText.textContent = `Â¡Perdiste! Mejor suerte la prÃ³xima vez.`;
        resultText.style.color = '#ff4c4c';
      } else {
        resultText.textContent = `Â¡Ganaste un multiplicador de ${segment.label}! ðŸŽ‰`;
        resultText.style.color = '#f0d76a';
      }
    }

    function easeOut(t, b, c, d) {
      const ts = (t /= d) * t;
      const tc = ts * t;
      return b + c * (tc + -3 * ts + 3 * t);
    }

    drawRoulette();
    spinBtn.addEventListener('click', () => {
      resultText.textContent = 'Girando...';
      resultText.style.color = '#f0d76a';
      spin();
    });
  </script>

  <script>
    // Juego de cartas - adivina la carta
    const cardsContainer = document.getElementById('cards-container');
    const cardsResult = document.getElementById('cards-result');
    const cardsResetBtn = document.getElementById('cards-reset-btn');

    const cards = ['A', 'K', 'Q', 'J'];
    let cardChosen = null;
    let winningCard = null;
    let gameActive = true;

    function resetCards() {
      cardChosen = null;
      winningCard = cards[Math.floor(Math.random() * cards.length)];
      gameActive = true;
      cardsResult.textContent = '';
      cardsResetBtn.style.display = 'none';
      Array.from(cardsContainer.children).forEach(card => {
        card.classList.remove('selected');
        card.style.pointerEvents = 'auto';
      });
      //console.log('Carta ganadora:', winningCard); // Puedes descomentar para probar
    }

    cardsContainer.addEventListener('click', e => {
      if (!gameActive) return;
      const target = e.target;
      if (!target.classList.contains('card')) return;

      cardChosen = target.dataset.card;
      gameActive = false;

      // Mostrar selecciÃ³n
      Array.from(cardsContainer.children).forEach(card => {
        card.classList.remove('selected');
        card.style.pointerEvents = 'none';
      });
      target.classList.add('selected');

      if (cardChosen === winningCard) {
        cardsResult.textContent = `Â¡Ganaste! La carta correcta era ${winningCard} ðŸŽ‰`;
        cardsResult.style.color = '#f0d76a';
      } else {
        cardsResult.textContent = `Perdiste. La carta correcta era ${winningCard}. Intenta de nuevo.`;
        cardsResult.style.color = '#ff4c4c';
      }
      cardsResetBtn.style.display = 'inline-block';
    });

    cardsResetBtn.addEventListener('click', resetCards);

    resetCards();
  </script>

  <script>
    // Juego de minas 8x8 con 2 minas
    const minesGrid = document.getElementById('mines-grid');
    const minesMessage = document.getElementById('mines-message');
    const minesResetBtn = document.getElementById('mines-reset-btn');

    const gridSize = 8;
    const totalCells = gridSize * gridSize;
    const totalMines = 2;

    let minesPositions = [];
    let revealedCount = 0;
    let gameOver = false;

    function initMines() {
      minesGrid.innerHTML = '';
      minesPositions = [];
      revealedCount = 0;
      gameOver = false;
      minesMessage.textContent = 'Selecciona una celda para comenzar.';

      // Generar minas aleatorias
      while (minesPositions.length < totalMines) {
        const pos = Math.floor(Math.random() * totalCells);
        if (!minesPositions.includes(pos)) {
          minesPositions.push(pos);
        }
      }

      for (let i = 0; i < totalCells; i++) {
        const cell = document.createElement('div');
        cell.classList.add('mine-cell');
        cell.dataset.index = i;
        cell.addEventListener('click', onCellClick);
        minesGrid.appendChild(cell);
      }
    }

    function onCellClick(e) {
      if (gameOver) return;
      const cell = e.currentTarget;
      const index = parseInt(cell.dataset.index);

      if (cell.classList.contains('revealed')) return;

      if (minesPositions.includes(index)) {
        cell.classList.add('mine', 'revealed');
        gameOver = true;
        revealAllMines();
        minesMessage.textContent = 'Â¡Perdiste! Encontraste una mina ðŸ’¥';
        minesMessage.style.color = '#ff4c4c';
      } else {
        cell.classList.add('revealed');
        revealedCount++;
        minesMessage.textContent = `Â¡Bien! Celdas seguras: ${revealedCount}`;
        minesMessage.style.color = '#f0d76a';
        if (revealedCount === totalCells - totalMines) {
          gameOver = true;
          minesMessage.textContent = 'Â¡Ganaste! Evitaste todas las minas ðŸŽ‰';
          minesMessage.style.color = '#f0d76a';
          revealAllMines();
        }
      }
    }

    function revealAllMines() {
      const cells = minesGrid.querySelectorAll('.mine-cell');
      cells.forEach((cell, i) => {
        if (minesPositions.includes(i)) {
          cell.classList.add('mine', 'revealed');
        }
      });
    }

    minesResetBtn.addEventListener('click', initMines);

    // Inicializa el juego al cargar
    initMines();
  </script>
</body>
</html>
